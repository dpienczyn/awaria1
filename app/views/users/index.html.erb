<p id="notice"><%= notice %></p>

<h1>Użytkownicy</h1>

<% flash.each do |name, msg| %>
<%= content_tag(:div, msg, class: "alert alert-info") %>
<% end %>

<div class="jumbotron">
<div class="table-responsive">
<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Imie</th>
      <th>Nazwisko</th>
      <th>Adres email</th>
      <th>Dział</th>
      <th>Typ konta</th>
      <th>Admin?</th>
      <th>Utworzony</th>
      <th colspan="3">Akcje</th>
    </tr>
  </thead>

  <tbody>
    <% @users.order("created_at").each do |user| %>
      <tr>
        <td><%= user.id %></td>
        <td><%= user.first_name %></td>
        <td><%= user.last_name %></td>
        <td><%= user.email %></td>
        <td><%= Dzial.where(id:user.dzial_id).pluck(:nazwa).last %></td>
        <td><%= Stanowisko.where(id:user.stanowisko_id).pluck(:nazwa).last %></td>
        <td><%= user.admin %></td>
        <td><%= user.created_at %></td>
        <td><%= link_to "Admin +", admin_grant_admin_user_path(user), method: :grantadmin, data: { confirm: "Jesteś pewny?" }, class:'btn btn-xs btn-warning' %></td>
        <td><%= link_to "Admin -", admin_deny_admin_user_path(user), method: :denyadmin, data: { confirm: "Jesteś pewny?" }, class:'btn btn-xs btn-warning' %></td>
        <td><%= link_to "Usuń", admin_destroy_user_path(user), method: :delete, data: { confirm: "Jesteś pewny?" }, class:'btn btn-xs btn-danger' %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
<p><%= link_to 'Zaplecze', static_pages_paneladmina_path, class:'btn btn-primary' %></p>
</div>
