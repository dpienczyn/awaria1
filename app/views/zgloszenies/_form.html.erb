<% content_for :head do %>
  <meta name="turbolinks-cache-control" content="no-cache">
<% end %>
<%= form_for(zgloszeny) do |f| %>
  <% if zgloszeny.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(zgloszeny.errors.count, "error") %> prohibited this zgloszeny from being saved:</h2>

      <ul>
      <% zgloszeny.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %><br />
  
  <div class="field">
  <%= f.label :Nazwa_pracownika %><br/>
  <% if current_user.admin? %>
            <%= f.select :pracownikid, User.where(ispracownik: true).pluck(:id, :first_name, :last_name).map{|db_fields| db_fields.join(' ')}, prompt: "Wybierz" %>
            <% end %>
  </div><br/>

  <div class="field">
    <%= f.label :Zgłoszenie_do_działu %><br/>
    <%= f.collection_select :dzial_id, Dzial.all, :id, :nazwa, prompt: "Wybierz", id:"dzialselect", prompt: "Wybierz" %>
  </div><br/>

  <div class="field">
    <%= f.label :ID_użytkownika %><br/>
    <%= f.text_field :user_id, :value => current_user.id ,:readonly => true%>
  </div><br/>
  <% if current_user.id != :user_id %>

  <div class="field">
    <%= f.label :data_zgłoszenia %><br/>
    <%= f.date_select :data_zgloszenia%>
  </div><br/>

  <div class="field">
    <%= f.label :nazwa_urzadzenia %><br/>
    <%= f.text_area :nazwa_urzadzenia%></div>

  <div class="field">
    <%= f.label :opis_uszkodzenia %><br/>
    <%= f.text_area :opis_uszkodzenia%>
  </div><br/>

  <div class="field">
    <%= f.label :nazwa_urzadzenia %><br/>
    <%= f.text_area :nazwa_urzadzenia %>
  </div><br/>

  <div class="field">
    <%= f.label :wysyłka %><br/>
    <%= f.select :wysylka, [['Tak', true], ['Nie', false]] %>
  </div><br />
  <% end %>
  <% if current_user.ispracownik? %>
  <div class="field">
  <%= f.label :priorytet %><br/>
  <%= f.text_field :priorytet%>
  </div><br />
  <div class="field">
  <%= f.label :status %><br/>
  <%= f.select :status, options_for_select(Zgloszenie.statuses_for_select)%>
  </div><br />
  <div class="field">
  <%= f.label :zrealizowane %><br/>
  <%= f.select :zrealizowane, [['Nie', false], ['Tak', true]]%>
  </div><br />
  <div class="field">
  <%= f.label :data_naprawy %><br/>
  <%= f.date_select :data_naprawy, :default => nil, class: 'custom-select'%>
  </div><br />
 <% end %>

  <div class="actions">
    <%= f.submit "Dodaj zgłoszenie", class:'btn btn-success' %>
    <%= link_to 'Pokaż', @zgloszeny, class: "btn btn-primary" %>
    <%= link_to 'Wróć', zgloszenies_path, class: "btn btn-danger" %>
  </div>
<% end %><br />

